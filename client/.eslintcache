[{"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\index.js":"1","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\App.js":"2","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\reportWebVitals.js":"3","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\context\\form-post-data.js":"4","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\misc\\helpers.js":"5","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\header.jsx":"6","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\Header.jsx":"7","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\context\\app-reducer.js":"8","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\styled\\StyledComponents.jsx":"9","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\BasicInfo.jsx":"10","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\index.js":"11","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\Details.jsx":"12","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\PeopleInvolved.jsx":"13","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\InjuriesInvolved.jsx":"14","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\Witnesses.jsx":"15","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\TheftOrDamage.jsx":"16","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\Comments.jsx":"17","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\RecurrenceAction.jsx":"18","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\EmailTo.jsx":"19","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\SummaryView.jsx":"20","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_BasicInfo.jsx":"21","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_Details.jsx":"22","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_WitnessesAndAction.jsx":"23","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_InjuriesAndTheftOrDmg.jsx":"24","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_Comments.jsx":"25","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_EmailTo.jsx":"26","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\ReportView.jsx":"27","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\ReportsList.jsx":"28","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\feedback\\FeedbackSubmit.js":"29","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\Footer.jsx":"30","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\404.jsx":"31","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\Attachments.jsx":"32","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_Attachments.jsx":"33","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\context\\sample-data.js":"34","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\EditReport.jsx":"35","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\Spinner.jsx":"36"},{"size":1474,"mtime":1611899333026,"results":"37","hashOfConfig":"38"},{"size":5927,"mtime":1611909343201,"results":"39","hashOfConfig":"38"},{"size":362,"mtime":499162500000,"results":"40","hashOfConfig":"38"},{"size":1013,"mtime":1611117285212,"results":"41","hashOfConfig":"38"},{"size":2830,"mtime":1610132446891,"results":"42","hashOfConfig":"38"},{"size":402,"mtime":1607825873671,"results":"43","hashOfConfig":"38"},{"size":904,"mtime":1610596987603,"results":"44","hashOfConfig":"38"},{"size":416,"mtime":1609831589651,"results":"45","hashOfConfig":"38"},{"size":1654,"mtime":1609912114794,"results":"46","hashOfConfig":"38"},{"size":4911,"mtime":1610855751521,"results":"47","hashOfConfig":"38"},{"size":692,"mtime":1610687846397,"results":"48","hashOfConfig":"38"},{"size":3069,"mtime":1609898124352,"results":"49","hashOfConfig":"38"},{"size":2181,"mtime":1609219118951,"results":"50","hashOfConfig":"38"},{"size":2548,"mtime":1609218365260,"results":"51","hashOfConfig":"38"},{"size":2192,"mtime":1609219633308,"results":"52","hashOfConfig":"38"},{"size":1736,"mtime":1609219557001,"results":"53","hashOfConfig":"38"},{"size":1574,"mtime":1610687762931,"results":"54","hashOfConfig":"38"},{"size":1644,"mtime":1609219383820,"results":"55","hashOfConfig":"38"},{"size":3222,"mtime":1610840611731,"results":"56","hashOfConfig":"38"},{"size":2000,"mtime":1610943257853,"results":"57","hashOfConfig":"38"},{"size":1167,"mtime":1609296257446,"results":"58","hashOfConfig":"38"},{"size":800,"mtime":1609299756512,"results":"59","hashOfConfig":"38"},{"size":592,"mtime":1609299750908,"results":"60","hashOfConfig":"38"},{"size":774,"mtime":1609299750908,"results":"61","hashOfConfig":"38"},{"size":372,"mtime":1610850486086,"results":"62","hashOfConfig":"38"},{"size":634,"mtime":1609293530119,"results":"63","hashOfConfig":"38"},{"size":3873,"mtime":1611908872583,"results":"64","hashOfConfig":"38"},{"size":3694,"mtime":1611909363153,"results":"65","hashOfConfig":"38"},{"size":6226,"mtime":1611016781423,"results":"66","hashOfConfig":"38"},{"size":379,"mtime":1610135738435,"results":"67","hashOfConfig":"38"},{"size":1474,"mtime":1610597203789,"results":"68","hashOfConfig":"38"},{"size":8577,"mtime":1611110892764,"results":"69","hashOfConfig":"38"},{"size":2612,"mtime":1611038897636,"results":"70","hashOfConfig":"38"},{"size":2401,"mtime":1611030503400,"results":"71","hashOfConfig":"38"},{"size":20444,"mtime":1611983062880,"results":"72","hashOfConfig":"38"},{"size":1601,"mtime":1611908488076,"results":"73","hashOfConfig":"38"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},"1qtaoyg",{"filePath":"77","messages":"78","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79","usedDeprecatedRules":"76"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"82"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"111"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"122","messages":"123","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"124","messages":"125","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"128","messages":"129","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"132","messages":"133","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"134","usedDeprecatedRules":"76"},{"filePath":"135","messages":"136","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"139","messages":"140","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"141","messages":"142","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"143","usedDeprecatedRules":"76"},{"filePath":"144","messages":"145","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"146","usedDeprecatedRules":"76"},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"149","messages":"150","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"151","messages":"152","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\index.js",[],["153","154"],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\App.js",["155"],"import React, { useContext, useEffect, useState } from 'react';\r\nimport * as Loader from './components/Spinner';\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport { FormDataContext } from './context/form-post-data';\r\nimport * as Form from './components/form-parts/index';\r\nimport styled from 'styled-components';\r\nimport Spinner from './components/Spinner';\r\n\r\n\r\n\r\n\r\nconst SmallTxt = styled.p.attrs({\r\n})`\r\n  color: #ccc;\r\n  font-weight: .9rem;\r\n`\r\n\r\n\r\nconst refreshPage = (e) => {\r\n  if (e) {\r\n    e.preventDefault();\r\n  }\r\n  window.location.reload();\r\n};\r\n\r\n\r\n\r\n\r\nexport default function App() {\r\n\r\n  //GLOBAL STATE\r\n  const { formData, addFormData } = useContext(FormDataContext);\r\n\r\n  //LOCAL STATE\r\n  const [basicInfo, setBasicInfo] = useState(false);\r\n  const [details, setDetails] = useState(false);\r\n  const [peopleInvolved, setPeopleInvolved] = useState(false);\r\n  const [injuriesInvolved, setInjuriesInvolved] = useState(false);\r\n  const [theftOrDamage, setTheftOrDamage] = useState(false);\r\n  const [recurrenceAction, setRecurrenceAction] = useState(false);\r\n  const [witnesses, setWitnesses] = useState(false);\r\n  const [comments, setComments] = useState(false);\r\n  const [emailTo, setEmailTo] = useState(false);\r\n  const [attachments, setAttachments] = useState(false);\r\n  const [summaryView, setSummaryView] = useState(false);\r\n  const [isComplete, setCompleted] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const showLoader = () => { Loader.Show(); }\r\n  const hideLoader = () => { Loader.Hide(); }\r\n\r\n\r\n  const reset = () => {\r\n    setBasicInfo(false);\r\n    setDetails(false);\r\n    setPeopleInvolved(false);\r\n    setInjuriesInvolved(false);\r\n    setTheftOrDamage(false);\r\n    setRecurrenceAction(false);\r\n    setWitnesses(false);\r\n    setComments(false);\r\n    setEmailTo(false);\r\n    setAttachments(false);\r\n    setSummaryView(false);\r\n  };\r\n\r\n\r\n  const actualizar = () => {\r\n    let curStep = formData.curStep;\r\n\r\n    reset();\r\n\r\n    switch (curStep) {\r\n      case 'basicInfo':\r\n        setBasicInfo(true);\r\n        break;\r\n\r\n      case 'details':\r\n        setDetails(true);\r\n        break;\r\n\r\n      case 'peopleInvolved':\r\n        setPeopleInvolved(true);\r\n        break;\r\n\r\n      case 'injuriesInvolved':\r\n        setInjuriesInvolved(true);\r\n        break;\r\n\r\n      case 'theftOrDamage':\r\n        setTheftOrDamage(true);\r\n        break;\r\n\r\n      case 'recurrenceAction':\r\n        setRecurrenceAction(true);\r\n        break;\r\n\r\n      case 'witnesses':\r\n        setWitnesses(true);\r\n        break;\r\n\r\n      case 'comments':\r\n        setComments(true);\r\n        break;\r\n\r\n      case 'attachments':\r\n        setAttachments(true);\r\n        break;\r\n\r\n      case 'emailTo':\r\n        setEmailTo(true);\r\n        break;\r\n\r\n      case 'summaryView':\r\n        setSummaryView(true);\r\n        break;\r\n\r\n      case 'done':\r\n        submitForm();\r\n        break;\r\n\r\n      case 'error':\r\n        // showError();\r\n        //this logic handled in html code\r\n        break;\r\n\r\n      default:\r\n        setBasicInfo(true);\r\n    }\r\n  }\r\n\r\n\r\n  //SUBMIT THE DATA => HTTPPOST\r\n  const submitForm = () => {\r\n\r\n    if(!isComplete) {\r\n\r\n      const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(formData)\r\n      };\r\n\r\n      //set flag for double loading of component on state change\r\n      setCompleted(true);\r\n\r\n      showLoader();\r\n\r\n      fetch('/api/incidentreport', requestOptions)\r\n        .then((response) => {\r\n\r\n\r\n          if(response.ok === false) {\r\n            addFormData(['curStep', 'error']);\r\n            setError(\"Form Submission Error! Please try again\");\r\n          }\r\n          else {\r\n            //refresh page in 7 seconds\r\n            setTimeout(function() {\r\n              refreshPage();\r\n            }, 7000);\r\n          }\r\n\r\n        })\r\n        .catch((err) => {\r\n          addFormData(['curStep', 'error']);\r\n          setError(\"Error during form submission!  Please try again.\");\r\n        })\r\n        .finally(() => {\r\n          hideLoader();\r\n        });\r\n\r\n    }\r\n    else {\r\n      // console.log(\"COMPLETE!!!!!!!!!!!!!!!!!!!!!!!\")\r\n    }\r\n  };\r\n\r\n\r\n\r\n\r\n  //runs on component render\r\n  useEffect(() => {\r\n    actualizar();\r\n  });\r\n\r\n  document.title = 'CFAN: Incident Report Form';\r\n\r\n\r\n\r\n  return (\r\n    <div id=\"App\">\r\n\r\n      <Loader.Spinner />\r\n\r\n      <Header hdrTxt=\"Form\" />\r\n\r\n      { !isComplete && !error && !summaryView && (\r\n        <div className=\"container\">\r\n          <div className=\"u-pull-right\">\r\n            <span className=\"req-fld\">*</span>\r\n              &nbsp;<small>Indicates a required field</small>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n\r\n      <br />\r\n\r\n\r\n      { basicInfo && <Form.BasicInfo/>}\r\n\r\n      { details && <Form.Details /> }\r\n\r\n      { peopleInvolved && <Form.PeopleInvolved /> }\r\n\r\n      { injuriesInvolved && <Form.InjuriesInvolved /> }\r\n\r\n      { theftOrDamage && <Form.TheftOrDamage /> }\r\n\r\n      { recurrenceAction && <Form.RecurrenceAction /> }\r\n\r\n      { witnesses && <Form.Witnesses /> }\r\n\r\n      { comments && <Form.Comments /> }\r\n\r\n      { attachments && <Form.Attachments /> }\r\n\r\n      { emailTo && <Form.EmailTo /> }\r\n\r\n      { summaryView && <Form.SummaryView /> }\r\n\r\n\r\n      { isComplete && (\r\n        <div className=\"container\">\r\n\r\n          { !error && (\r\n            <p>Your Incident Report has been filed!  Thanks!</p>\r\n          )}\r\n\r\n          { error && (\r\n            <p className=\"err-txt\">{error}</p>\r\n          )}\r\n\r\n          <center>\r\n            <p>\r\n              <button onClick={refreshPage}>refresh page</button>\r\n            </p>\r\n          </center>\r\n\r\n          { !error && (\r\n            <center>\r\n              <SmallTxt>page will reload shortly...</SmallTxt>\r\n            </center>\r\n          )}\r\n\r\n        </div>\r\n      )}\r\n\r\n      <Footer />\r\n\r\n    </div>\r\n  );\r\n}\r\n","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\reportWebVitals.js",[],["156","157"],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\context\\form-post-data.js",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\misc\\helpers.js",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\header.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\Header.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\context\\app-reducer.js",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\styled\\StyledComponents.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\BasicInfo.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\index.js",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\Details.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\PeopleInvolved.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\InjuriesInvolved.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\Witnesses.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\TheftOrDamage.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\Comments.jsx",[],["158","159"],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\RecurrenceAction.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\EmailTo.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\SummaryView.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_BasicInfo.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_Details.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_WitnessesAndAction.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_InjuriesAndTheftOrDmg.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_Comments.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_EmailTo.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\ReportView.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\ReportsList.jsx",["160"],"import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport * as Loader from '../Spinner';\r\nimport Header from '../Header';\r\nimport Footer from '../Footer';\r\nimport * as a from '../styled/StyledComponents';\r\nimport * as _ from '../../misc/helpers';\r\nimport { Table, Thead, Tbody, Tr, Th, Td } from 'react-super-responsive-table';\r\nimport 'react-super-responsive-table/dist/SuperResponsiveTableStyle.css';\r\nimport styled from 'styled-components';\r\nimport './reportsList.css';\r\n\r\nconst ALink = styled(Link).attrs({\r\n  className: 'button',\r\n  id: 'new-btn'\r\n})`\r\n  &:hover {\r\n    background-color: #444;\r\n    color: #fff;\r\n  }\r\n`\r\n\r\nconst ErrText = styled.p.attrs({\r\n})`\r\n  color: red;\r\n  font-size: 2rem;\r\n  font-weight: bold;\r\n`\r\n\r\nconst TableWrap = styled.div`\r\n  margin: 42px auto;\r\n  width: 93%;\r\n`\r\n\r\n\r\nexport default function ReportsList (props) {\r\n  const [errMsg, setError] = useState(false);\r\n  const [reportsList, setData] = useState(false);\r\n\r\n  document.title = 'CFAN: Incident Reports List';\r\n\r\n  const showLoader = () => { Loader.Show(); }\r\n  const hideLoader = () => { Loader.Hide(); }\r\n\r\n\r\n\r\n  const getData = async () => {\r\n    try {\r\n      showLoader();\r\n\r\n      //ajax call to back end\r\n      let response = await fetch(`/api/incidentreports`);\r\n\r\n      if (response.ok) {\r\n        let elReportos = await response.json();\r\n        setData(elReportos.data);\r\n      }\r\n      else {\r\n        setError(\"Database Error!\");\r\n      }\r\n    }\r\n    catch (e) {\r\n      console.log(\"err: \", e);\r\n      setError(\"Error on Page Load!\");\r\n    }\r\n    finally {\r\n      hideLoader();\r\n    }\r\n  };\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, []);\r\n\r\n\r\n\r\n  // console.log(reportsList, reportsList[0]);\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div id=\"report-view\">\r\n\r\n      <Loader.Spinner />\r\n\r\n      <Header newHdrTxt=\"Incident Reports Master List\" />\r\n\r\n      { errMsg && (\r\n        <center>\r\n          <br />\r\n          <ErrText>{errMsg}</ErrText>\r\n        </center>\r\n      )}\r\n\r\n\r\n      { !errMsg && reportsList && (\r\n        <TableWrap>\r\n\r\n          <Table>\r\n            <Thead>\r\n              <Tr>\r\n                <Th>Report ID</Th>\r\n                <Th className=\"no-wrap\">Date Filed</Th>\r\n                <Th>Reported By</Th>\r\n                <Th className=\"no-wrap\">Incident Date</Th>\r\n                <Th>Briefing</Th>\r\n              </Tr>\r\n            </Thead>\r\n            <Tbody>\r\n              { reportsList.map((rpt, ix) => {\r\n                let viewUrl = `/reports/view/${rpt.reportID}`;\r\n                let editUrl = `/reports/edit/${rpt.reportID}`;\r\n\r\n                return (\r\n                  <Tr key={ix}>\r\n                    <Td>\r\n                      <a className=\"view-link\" href={viewUrl} title=\"View\" alt=\"\">{rpt.reportID}</a>\r\n                      <div>\r\n                        <a className=\"edit-link\" href={editUrl} title=\"Edit\" alt=\"\">\r\n                          edit\r\n                        </a>\r\n                      </div>\r\n                    </Td>\r\n\r\n                    <Td className=\"no-wrap\">{rpt.dateToday}</Td>\r\n\r\n                    <Td>{rpt.name}</Td>\r\n\r\n                    <Td className=\"no-wrap\">\r\n                      {rpt.incidentDate}<br/>\r\n                      {_.getFormattedTime(rpt.incidentTime)}\r\n                    </Td>\r\n\r\n                    <Td>{rpt.briefDescription}</Td>\r\n                  </Tr>\r\n                )\r\n              })}\r\n            </Tbody>\r\n          </Table>\r\n\r\n\r\n          <a.Row>\r\n            <ALink to=\"/\">\r\n              File A New Report\r\n            </ALink>\r\n\r\n          </a.Row>\r\n        </TableWrap>\r\n\r\n      )}\r\n\r\n      <Footer />\r\n\r\n\r\n\r\n    </div>\r\n  )\r\n\r\n};\r\n","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\feedback\\FeedbackSubmit.js",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\Footer.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\404.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\form-parts\\Attachments.jsx",["161"],"import React, { useContext, useEffect, useState } from 'react';\r\nimport { FormDataContext } from '../../context/form-post-data';\r\nimport styled from 'styled-components';\r\nimport * as a from '../styled/StyledComponents';\r\n\r\n\r\nconst ErrTxt = styled.div.attrs({\r\n  className: 'err-txt'\r\n})`\r\n  display: none;\r\n  font-size: 2.1rem;\r\n`\r\nconst ImgFileName = styled.div`\r\n  color: #607D8B;\r\n  display: none;\r\n  font-style: italic;\r\n  font-weight: bold;\r\n`\r\nconst Row1 = styled.div.attrs({\r\n  className: 'row'\r\n})`\r\n  margin-bottom: 42px;\r\n`\r\n\r\nconst Label = styled.div`\r\n  background-color: #e1e1e1;\r\n  border: 1px solid #aba;\r\n  border-width: 1px 0;\r\n  font-weight: bold;\r\n  margin: 12px 0;\r\n  padding: 3px 0 3px 3px;\r\n`\r\n\r\nconst InnerWrap = styled.div`\r\n  padding-left: 7px;\r\n`\r\n\r\nconst ImgLinks = styled.div`\r\n  font-weight: 1.2rem;\r\n  display: none;\r\n\r\n  span {\r\n    cursor: pointer;\r\n    display: inline;\r\n    text-decoration: underline;\r\n    margin: 0 4px;\r\n  }\r\n`\r\n\r\n\r\n\r\nexport default function Attachments () {\r\n  const { formData, addFormData } = useContext(FormDataContext);\r\n  const [imgsObj, setImgs] = useState(formData.attachments || {});\r\n  const [curStep, setStep] = useState('');\r\n  // console.log(\"PAGE LOAD/RENDER?\");\r\n\r\n\r\n\r\n  function backBtnClick() {\r\n    setStep('comments');\r\n  }\r\n  function nextBtnClick() {\r\n    setStep('emailTo');\r\n  }\r\n  function editLink(e) {\r\n    const key = _getKey(e.currentTarget.id);\r\n    _toggleFieldDesc(key);\r\n  }\r\n  function removeLink(e) {\r\n    const key = _getKey(e.currentTarget.id);\r\n    _elem(key).value = null;\r\n    _showPreviewImg(key, false);\r\n    _toggleFieldDesc(key);\r\n\r\n    let curObj = imgsObj;\r\n    delete curObj[key];\r\n    setImgs(curObj);\r\n  }\r\n\r\n\r\n  //get img key, ie: img1, img2\r\n  const _getKey = function(strIn) {\r\n    return strIn.substr(0, 4);\r\n  }\r\n\r\n  //img file >> base64\r\n  const _getBase64 = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onloadend = () => resolve(reader.result);\r\n      reader.onerror = (err) => reject('Error: ', err);\r\n    });\r\n  }\r\n  //will hide errDiv or show with errMsg\r\n  function _setErrorDiv(name, errMsg) {\r\n    let divName = `${name}-err`;\r\n    let errDiv = _elem(divName);\r\n    errDiv.style.display = 'none';\r\n\r\n    if (errMsg) {\r\n      errDiv.innerHTML = errMsg;\r\n      errDiv.style.display = 'block';\r\n    }\r\n  }\r\n\r\n  //not so verbose htmlElem get\r\n  const _elem = (elem) => {\r\n    return document.getElementById(elem);\r\n  };\r\n\r\n  //if img's in state, show them\r\n  const _showPreviewImg = (key, imgStr) => {\r\n    let imgView = _elem(key+'-preview');\r\n\r\n    if(imgStr) {\r\n      let img = new Image();\r\n      img.src = imgStr;\r\n      img.className = 'preview-img';\r\n      imgView.innerHTML = img.outerHTML;\r\n      imgView.style.display = 'block';\r\n      return;\r\n    }\r\n\r\n    //hide if no src img/data\r\n    imgView.style.display = 'none';\r\n  };\r\n\r\n  //show/hide #key and #fileName\r\n  const _toggleFieldDesc = (key, imgName) => {\r\n    let input = _elem(key);\r\n    let fileName = _elem(key+'-fileName');\r\n    let imgLinks = _elem(key+'-links');\r\n\r\n\r\n    if(!imgName) {\r\n      //show input field\r\n      input.style.display = 'block';\r\n\r\n      //hide file name\r\n      fileName.style.display = 'none';\r\n\r\n      //hide links: edit/remove\r\n      imgLinks.style.display = 'none';\r\n    }\r\n    else {\r\n      //hide input\r\n      input.style.display = 'none';\r\n\r\n      //show file name\r\n      fileName.style.display = 'block';\r\n      fileName.innerHTML = imgName;\r\n\r\n      //show links\r\n      imgLinks.style.display = 'block';\r\n    }\r\n  };\r\n\r\n  //check file extension\r\n  const _validateFile = (fileName) => {\r\n    var exts_allowed = [\"png\", \"jpeg\", \"jpg\", \"jfif\"];\r\n    var file_ext = fileName.split('.').pop();\r\n    for (var i = 0; i <= exts_allowed.length; i++) {\r\n      if (exts_allowed[i] === file_ext.toLowerCase()) {\r\n        return true; // valid file extension\r\n      }\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const pageInit = () => {\r\n      const len = Object.keys(imgsObj).length;\r\n\r\n      //if imgs in state object\r\n      if(len > 0) {\r\n\r\n        let curObj = {};\r\n        Object.keys(imgsObj).forEach((key) => {\r\n          curObj = imgsObj[key];\r\n          _showPreviewImg(key, curObj.base64String);\r\n          _toggleFieldDesc(key, curObj.imgName);\r\n        });\r\n      }\r\n    };\r\n\r\n    pageInit();\r\n  }, []);\r\n\r\n\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    if(Object.keys(imgsObj).length > 0) {\r\n      addFormData(['attachments', imgsObj]);\r\n    }\r\n    else {\r\n      addFormData(['attachments', null]);\r\n    }\r\n\r\n    addFormData(['curStep', curStep]);\r\n  }\r\n\r\n\r\n  //##  Change handler for file fields\r\n  function changeHandler(e) {\r\n    let formObj = e.currentTarget;\r\n    let name = formObj.name, val = formObj.files[0];\r\n    let errMsg = false;\r\n\r\n    //no file selected!\r\n    if(!val) {\r\n      _setErrorDiv(name);\r\n      let curObj = imgsObj;\r\n      delete curObj[name];\r\n      setImgs(curObj);\r\n      return;\r\n    }\r\n\r\n    //check file extension\r\n    if(!_validateFile(val.name)) {\r\n      errMsg = 'Invalid file extension!';\r\n      _setErrorDiv(name, errMsg);\r\n      return;\r\n    }\r\n\r\n    //check size! //10mb max <= 16mb max in mongodb\r\n    if (val.size > 10485760) {\r\n      errMsg = 'File exceeds maximum file size!';\r\n      _setErrorDiv(name, errMsg);\r\n      return;\r\n    }\r\n\r\n    //we have file of right size...\r\n    _getBase64(val)\r\n      .then((imgStr) => {\r\n\r\n        try {\r\n          // const imgStr = `data:${val.type};base64, ${resp}`;\r\n          // var testFile = dataURLtoFile(imgStr, val.name);\r\n\r\n          //remove any visible field errors\r\n          _setErrorDiv(name);\r\n\r\n          //show preview img\r\n          _showPreviewImg(name, imgStr);\r\n          _toggleFieldDesc(name, val.name);\r\n\r\n          //put into state\r\n          let curObj = imgsObj;\r\n          curObj[name] = {\r\n            base64String: imgStr,\r\n            imgName: val.name,\r\n            imgSize: val.size,\r\n            imgType: val.type\r\n          };\r\n          setImgs(curObj);\r\n        }\r\n        catch(e) {\r\n          _setErrorDiv(name, e);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        _setErrorDiv(name, err);\r\n      });\r\n  }\r\n\r\n\r\n\r\n\r\n  //base64 >> img file\r\n  // function _dataURLtoFile(dataurl, filename) {\r\n  //   var arr = dataurl.split(','),\r\n  //     mime = arr[0].match(/:(.*?);/)[1],\r\n  //     bstr = atob(arr[1]),\r\n  //     n = bstr.length,\r\n  //     u8arr = new Uint8Array(n);\r\n\r\n  //   while (n--) {\r\n  //     u8arr[n] = bstr.charCodeAt(n);\r\n  //   }\r\n\r\n  //   return new File([u8arr], filename, { type: mime });\r\n  // }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <a.Container>\r\n      <form onSubmit={handleSubmit}>\r\n          <label>\r\n            Use the form below to add images to this report:<br />\r\n            <a.FieldInfoText>.jpg, .jpeg or .png files only</a.FieldInfoText>\r\n          </label>\r\n\r\n        <Row1>\r\n          <InnerWrap>\r\n\r\n            <br />\r\n            <Row1>\r\n              <Label>Image 1&nbsp;\r\n                 <a.FieldInfoText>max file size is 10MB</a.FieldInfoText>\r\n              </Label>\r\n              <ErrTxt id=\"img1-err\">&nbsp;</ErrTxt>\r\n              <input type=\"file\" name=\"img1\" id=\"img1\" onChange={changeHandler} />\r\n              <ImgFileName id=\"img1-fileName\" />\r\n\r\n              <ImgLinks id=\"img1-links\">\r\n                <span id=\"img1-edit\" onClick={editLink}>edit</span>\r\n                <span id=\"img1-remove\" onClick={removeLink}>remove</span>\r\n              </ImgLinks>\r\n\r\n              <br />\r\n              <div id=\"img1-preview\">&nbsp;</div>\r\n            </Row1>\r\n\r\n\r\n            <Row1>\r\n              <Label>Image 2&nbsp;\r\n                 <a.FieldInfoText>max file size is 10MB</a.FieldInfoText>\r\n              </Label>\r\n              <ErrTxt id=\"img2-err\">&nbsp;</ErrTxt>\r\n              <input type=\"file\" name=\"img2\" id=\"img2\" onChange={changeHandler} />\r\n              <ImgFileName id=\"img2-fileName\" />\r\n\r\n              <ImgLinks id=\"img2-links\">\r\n                <span id=\"img2-edit\" onClick={editLink}>edit</span>\r\n                <span id=\"img2-remove\" onClick={removeLink}>remove</span>\r\n              </ImgLinks>\r\n\r\n              <br />\r\n              <div id=\"img2-preview\">&nbsp;</div>\r\n            </Row1>\r\n\r\n          </InnerWrap>\r\n        </Row1>\r\n\r\n\r\n        <a.Row id=\"btns-wrap\">\r\n          <a.BackBtn onClick={backBtnClick} />\r\n\r\n          <a.NextBtn onClick={nextBtnClick} />\r\n        </a.Row>\r\n\r\n      </form>\r\n    </a.Container>\r\n\r\n  )\r\n\r\n};\r\n","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\common\\_Attachments.jsx",["162"],"import React, { Fragment, useEffect, useState } from 'react';\r\nimport * as a from '../../styled/StyledComponents';\r\nimport styled from 'styled-components';\r\n\r\n\r\nconst ImgFileName = styled.div`\r\n  color: #607D8B;\r\n  display: none;\r\n  font-style: italic;\r\n  font-weight: bold;\r\n`\r\n\r\nconst IMG = styled.div`\r\n  img {\r\n    display: block;\r\n    margin-bottom: 42px;\r\n    max-width: 200px;\r\n  }\r\n`\r\n\r\nconst InnerWrap = styled.div.attrs({\r\n  className: \"u-full-width\"\r\n})`\r\n  display: table;\r\n  margin: 12px 0 21px;\r\n  padding-left: 7px;\r\n`\r\n\r\n\r\nexport default function Attachments (props) {\r\n  const formData = props.formData;\r\n  const [err, setErr] = useState(false);\r\n\r\n\r\n  useEffect(() =>  {\r\n    let _d = formData.attachments;\r\n\r\n    if(formData.attachments.err) {\r\n      setErr(true);\r\n    }\r\n    else {\r\n      Object.keys(formData.attachments).forEach((key) => {\r\n        if(key !== \"err\") {\r\n          // console.log(\"test\");\r\n          _showPreviewImg(key, _d[key]);\r\n        }\r\n      });\r\n    }\r\n\r\n  }, []);\r\n\r\n\r\n  //get html element\r\n  const _getElem = (id) => {\r\n    return document.getElementById(id);\r\n  }\r\n\r\n  //if img's in state, show them\r\n  const _showPreviewImg = (key, curObj) => {\r\n    let imgView = _getElem(key + '-preview');\r\n    let fileNameLbl = _getElem(key + '-fileName');\r\n\r\n    if (curObj) {\r\n      let img = new Image();\r\n      img.src = curObj.base64String;\r\n      img.className = 'preview-img';\r\n\r\n      imgView.innerHTML = img.outerHTML;\r\n      imgView.style.display = 'block';\r\n\r\n      fileNameLbl.innerHTML = curObj.imgName;\r\n      fileNameLbl.style.display = 'block';\r\n\r\n      return;\r\n    }\r\n\r\n    //hide if no src img/data\r\n    imgView.style.display = 'none';\r\n    fileNameLbl.style.display = 'none';\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <Fragment>\r\n\r\n        <a.Row1>\r\n          <div className=\"u-full-width top-border\">\r\n            <a.Lbl>Image Attachments</a.Lbl>\r\n\r\n            { !err && (\r\n              <InnerWrap>\r\n                <a.SixCols>\r\n                  <ImgFileName id=\"img1-fileName\" />\r\n                  <IMG id=\"img1-preview\">&nbsp;</IMG>\r\n                </a.SixCols>\r\n\r\n                <a.SixCols>\r\n                  <ImgFileName id=\"img2-fileName\" />\r\n                  <IMG id=\"img2-preview\">&nbsp;</IMG>\r\n                </a.SixCols>\r\n              </InnerWrap>\r\n            )}\r\n\r\n\r\n            { err && (\r\n              <InnerWrap>\r\n                <div className=\"err-txt\">\r\n                  { formData.attachments.err }\r\n                </div>\r\n              </InnerWrap>\r\n            )}\r\n\r\n          </div>\r\n        </a.Row1>\r\n\r\n    </Fragment>\r\n  )\r\n\r\n};\r\n","C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\context\\sample-data.js",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\reports\\EditReport.jsx",[],"C:\\z_storage\\projects\\CFAN\\form-mailer-app\\client\\src\\components\\Spinner.jsx",[],{"ruleId":"163","replacedBy":"164"},{"ruleId":"165","replacedBy":"166"},{"ruleId":"167","severity":1,"message":"168","line":8,"column":8,"nodeType":"169","messageId":"170","endLine":8,"endColumn":15},{"ruleId":"163","replacedBy":"171"},{"ruleId":"165","replacedBy":"172"},{"ruleId":"163","replacedBy":"173"},{"ruleId":"165","replacedBy":"174"},{"ruleId":"175","severity":1,"message":"176","line":75,"column":6,"nodeType":"177","endLine":75,"endColumn":8,"suggestions":"178"},{"ruleId":"175","severity":1,"message":"179","line":193,"column":6,"nodeType":"177","endLine":193,"endColumn":8,"suggestions":"180"},{"ruleId":"175","severity":1,"message":"181","line":50,"column":6,"nodeType":"177","endLine":50,"endColumn":8,"suggestions":"182"},"no-native-reassign",["183"],"no-negated-in-lhs",["184"],"no-unused-vars","'Spinner' is defined but never used.","Identifier","unusedVar",["183"],["184"],["183"],["184"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getData'. Either include it or remove the dependency array.","ArrayExpression",["185"],"React Hook useEffect has missing dependencies: '_showPreviewImg', '_toggleFieldDesc', and 'imgsObj'. Either include them or remove the dependency array.",["186"],"React Hook useEffect has missing dependencies: '_showPreviewImg' and 'formData.attachments'. Either include them or remove the dependency array.",["187"],"no-global-assign","no-unsafe-negation",{"desc":"188","fix":"189"},{"desc":"190","fix":"191"},{"desc":"192","fix":"193"},"Update the dependencies array to be: [getData]",{"range":"194","text":"195"},"Update the dependencies array to be: [_showPreviewImg, _toggleFieldDesc, imgsObj]",{"range":"196","text":"197"},"Update the dependencies array to be: [_showPreviewImg, formData.attachments]",{"range":"198","text":"199"},[1687,1689],"[getData]",[4436,4438],"[_showPreviewImg, _toggleFieldDesc, imgsObj]",[1006,1008],"[_showPreviewImg, formData.attachments]"]